<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - ImproveCommunication</title>
    <link rel="stylesheet" href="../css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="../js/config.js"></script>
    <style>
        /* ===== DASHBOARD SPECIFIC STYLES ===== */
        .dashboard {
            background: linear-gradient(135deg, #f0f2ff 0%, #e6e9ff 100%);
            min-height: 100vh;
        }

        /* Welcome Section */
        .welcome-section {
            background: white;
            border: 1px solid #dee2e6;
            border-radius: 20px;
            padding: 2.5rem;
            margin-bottom: 2rem;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
            animation: fadeIn 0.5s ease;
        }

        .welcome-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 1.5rem;
            flex-wrap: wrap;
            gap: 1.5rem;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 1.5rem;
        }

        .user-avatar {
            width: 80px;
            height: 80px;
            background: linear-gradient(135deg, #4361ee, #7209b7);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.5rem;
            color: white;
            box-shadow: 0 10px 20px rgba(67, 97, 238, 0.3);
        }

        .user-details h1 {
            margin-bottom: 0.5rem;
            font-size: 2rem;
            color: #1a202c;
        }

        .user-details p {
            color: #4a5568;
            font-size: 1.1rem;
        }

        .level-badge {
            background: linear-gradient(135deg, #f8961e, #f94144);
            color: white;
            padding: 0.5rem 1.5rem;
            border-radius: 25px;
            font-weight: 600;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.9rem;
        }

        /* Stats Grid */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .stat-card {
            background: white;
            border: 1px solid #dee2e6;
            border-radius: 15px;
            padding: 2rem;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .stat-card:hover {
            transform: translateY(-5px);
            border-color: #667eea;
            background: #fafbff;
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.15);
        }

        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: linear-gradient(90deg, #4361ee, #7209b7);
        }

        .stat-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 1.5rem;
        }

        .stat-icon {
            width: 60px;
            height: 60px;
            background: rgba(67, 97, 238, 0.1);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            color: #4361ee;
        }

        .stat-trend {
            display: flex;
            align-items: center;
            gap: 0.25rem;
            color: #4cc9f0;
            font-weight: 600;
            font-size: 0.9rem;
        }

        .stat-trend.negative {
            color: #f94144;
        }

        .stat-value {
            font-size: 2.5rem;
            font-weight: 800;
            color: #1a202c;
            margin-bottom: 0.5rem;
        }

        .stat-label {
            color: #4a5568;
            font-size: 0.95rem;
        }

        /* Actions Section */
        .actions-section {
            background: white;
            border: 1px solid #dee2e6;
            border-radius: 20px;
            padding: 2.5rem;
            margin-bottom: 2rem;
        }

        .section-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 2rem;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .section-header h2 {
            margin: 0;
            font-size: 1.8rem;
            color: #1a202c;
        }

        .action-buttons {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
        }

        .action-btn {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 15px;
            padding: 2rem;
            text-decoration: none;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 1.5rem;
        }

        .action-btn:hover {
            transform: translateY(-5px);
            background: white;
            border-color: #667eea;
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.15);
        }

        .action-icon {
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, #4361ee, #7209b7);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            color: white;
        }

        .action-content h3 {
            color: #1a202c;
            margin-bottom: 0.5rem;
            font-size: 1.2rem;
        }

        .action-content p {
            color: #4a5568;
            font-size: 0.9rem;
            margin: 0;
        }

        /* Recent Activity */
        .activity-section {
            background: white;
            border: 1px solid #dee2e6;
            border-radius: 20px;
            padding: 2.5rem;
        }

        .activity-list {
            list-style: none;
        }

        .activity-item {
            display: flex;
            align-items: center;
            gap: 1.5rem;
            padding: 1.5rem;
            border-bottom: 1px solid #e9ecef;
            transition: background 0.3s ease;
        }

        .activity-item:hover {
            background: #f8f9fa;
            border-radius: 10px;
        }

        .activity-item:last-child {
            border-bottom: none;
        }

        .activity-icon {
            width: 50px;
            height: 50px;
            background: rgba(67, 97, 238, 0.1);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            color: #4361ee;
        }

        .activity-content {
            flex: 1;
        }

        .activity-text {
            color: #1a202c;
            margin-bottom: 0.25rem;
            font-weight: 500;
        }

        .activity-details {
            color: #4a5568;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .activity-time {
            color: #718096;
            font-size: 0.85rem;
        }

        /* Quick Stats */
        .quick-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem;
            margin: 2rem 0;
        }

        .quick-stat {
            background: #fafbff;
            border: 1px solid #e0e7ff;
            border-radius: 15px;
            padding: 1.5rem;
            text-align: center;
        }

        .quick-stat-icon {
            width: 50px;
            height: 50px;
            background: rgba(67, 97, 238, 0.1);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            color: #4361ee;
            margin: 0 auto 1rem;
        }

        .quick-stat-value {
            font-size: 2rem;
            font-weight: 800;
            color: #1a202c;
            margin-bottom: 0.25rem;
        }

        .quick-stat-label {
            color: #4a5568;
            font-size: 0.9rem;
        }

        /* Responsive */
        @media (max-width: 1200px) {
            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 992px) {
            .welcome-header {
                flex-direction: column;
                align-items: flex-start;
            }

            .action-buttons {
                grid-template-columns: repeat(2, 1fr);
            }

            .quick-stats {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 768px) {
            .welcome-section,
            .actions-section,
            .activity-section {
                padding: 1.5rem;
            }

            .user-info {
                flex-direction: column;
                text-align: center;
            }

            .stats-grid {
                grid-template-columns: 1fr;
            }

            .action-buttons {
                grid-template-columns: 1fr;
            }

            .quick-stats {
                grid-template-columns: 1fr;
            }

            .activity-item {
                flex-direction: column;
                text-align: center;
                gap: 1rem;
            }

            .activity-details {
                flex-direction: column;
                gap: 0.5rem;
            }
        }

        @media (max-width: 480px) {
            .nav-links {
                flex-wrap: wrap;
                justify-content: center;
            }

            .stat-value {
                font-size: 2rem;
            }

            .action-btn {
                padding: 1.5rem;
            }
        }

        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body class="dashboard">
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-brand">
                <div class="brand-logo">
                    <i class="fas fa-comments"></i>
                </div>
                <h2>ImproveCommunication</h2>
            </div>
            <div class="nav-links">
                <a href="dashboard.html" class="nav-link active">
                    <i class="fas fa-home"></i> Dashboard
                </a>
                <a href="users.html" class="nav-link">
                    <i class="fas fa-users"></i> Find Partners
                </a>
                <a href="leaderboard.html" class="nav-link">
                    <i class="fas fa-trophy"></i> Leaderboard
                </a>
                <a href="profile.html" class="nav-link">
                    <i class="fas fa-user"></i> Profile
                </a>
                <button onclick="logout()" class="btn btn-outline">
                    <i class="fas fa-sign-out-alt"></i> Logout
                </button>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="dashboard-container" style="max-width: 1400px; margin: 2rem auto; padding: 0 2rem;">
        <!-- Welcome Section -->
        <section class="welcome-section">
            <div class="welcome-header">
                <div class="user-info">
                    <div class="user-avatar">
                        <i class="fas fa-user"></i>
                    </div>
                    <div class="user-details">
                        <h1 id="welcome-message">Welcome Back!</h1>
                        <p>Track your progress and improve your English communication skills</p>
                        <div class="level-badge">
                            <i class="fas fa-star"></i>
                            <span id="user-level">Intermediate Level</span>
                        </div>
                    </div>
                </div>
                <div class="quick-stats">
                    <div class="quick-stat">
                        <div class="quick-stat-icon">
                            <i class="fas fa-fire"></i>
                        </div>
                        <div class="quick-stat-value" id="streak">7</div>
                        <div class="quick-stat-label">Day Streak</div>
                    </div>
                    <div class="quick-stat">
                        <div class="quick-stat-icon">
                            <i class="fas fa-calendar-check"></i>
                        </div>
                        <div class="quick-stat-value" id="active-days">24</div>
                        <div class="quick-stat-label">Active Days</div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Stats Grid -->
        <section class="stats-grid">
            <div class="stat-card">
                <div class="stat-header">
                    <div class="stat-icon">
                        <i class="fas fa-bullseye"></i>
                    </div>
                    <div class="stat-trend positive">
                        <i class="fas fa-arrow-up"></i>
                        <span>+12%</span>
                    </div>
                </div>
                <div class="stat-value" id="ai-score">87</div>
                <div class="stat-label">AI Communication Score</div>
            </div>

            <div class="stat-card">
                <div class="stat-header">
                    <div class="stat-icon">
                        <i class="fas fa-phone-alt"></i>
                    </div>
                    <div class="stat-trend positive">
                        <i class="fas fa-arrow-up"></i>
                        <span>+5</span>
                    </div>
                </div>
                <div class="stat-value" id="total-calls">42</div>
                <div class="stat-label">Total Practice Calls</div>
            </div>

            <div class="stat-card">
                <div class="stat-header">
                    <div class="stat-icon">
                        <i class="fas fa-clock"></i>
                    </div>
                    <div class="stat-trend positive">
                        <i class="fas fa-arrow-up"></i>
                        <span>+45min</span>
                    </div>
                </div>
                <div class="stat-value" id="total-minutes">18h 30m</div>
                <div class="stat-label">Total Practice Time</div>
            </div>

            <div class="stat-card">
                <div class="stat-header">
                    <div class="stat-icon">
                        <i class="fas fa-trophy"></i>
                    </div>
                    <div class="stat-trend negative">
                        <i class="fas fa-arrow-down"></i>
                        <span>-2</span>
                    </div>
                </div>
                <div class="stat-value" id="rank">#124</div>
                <div class="stat-label">Global Rank</div>
            </div>
        </section>

        <!-- Quick Actions -->
        <section class="actions-section">
            <div class="section-header">
                <h2>Quick Actions</h2>
                <a href="practice.html" class="btn btn-primary">
                    <i class="fas fa-play-circle"></i> Start Practice Now
                </a>
            </div>
            <div class="action-buttons">
                <a href="users.html" class="action-btn">
                    <div class="action-icon">
                        <i class="fas fa-users"></i>
                    </div>
                    <div class="action-content">
                        <h3>Find Partners</h3>
                        <p>Connect with other learners for practice</p>
                    </div>
                </a>

                <a href="leaderboard.html" class="action-btn">
                    <div class="action-icon">
                        <i class="fas fa-trophy"></i>
                    </div>
                    <div class="action-content">
                        <h3>Leaderboard</h3>
                        <p>See top performers and compete</p>
                    </div>
                </a>

                <a href="profile.html" class="action-btn">
                    <div class="action-icon">
                        <i class="fas fa-user-circle"></i>
                    </div>
                    <div class="action-content">
                        <h3>My Profile</h3>
                        <p>View and edit your profile settings</p>
                    </div>
                </a>

                <a href="analytics.html" class="action-btn">
                    <div class="action-icon">
                        <i class="fas fa-chart-bar"></i>
                    </div>
                    <div class="action-content">
                        <h3>Analytics</h3>
                        <p>Detailed performance insights</p>
                    </div>
                </a>
            </div>
        </section>

        <!-- Recent Activity -->
        <section class="activity-section">
            <div class="section-header">
                <h2>Recent Activity</h2>
                <a href="activity.html" class="btn btn-outline">
                    <i class="fas fa-history"></i> View All Activity
                </a>
            </div>
            <ul class="activity-list" id="activity-list">
                <li class="activity-item">
                    <div class="activity-icon">
                        <i class="fas fa-microphone"></i>
                    </div>
                    <div class="activity-content">
                        <div class="activity-text">Practice call with Maria from Spain</div>
                        <div class="activity-details">
                            <span class="activity-detail">
                                <i class="fas fa-clock"></i> 25 minutes
                            </span>
                            <span class="activity-detail">
                                <i class="fas fa-chart-line"></i> Score: 85/100
                            </span>
                        </div>
                    </div>
                    <div class="activity-time">2 hours ago</div>
                </li>

                <li class="activity-item">
                    <div class="activity-icon">
                        <i class="fas fa-medal"></i>
                    </div>
                    <div class="activity-content">
                        <div class="activity-text">Achieved "Conversation Master" badge</div>
                        <div class="activity-details">
                            <span class="activity-detail">
                                <i class="fas fa-trophy"></i> New achievement unlocked
                            </span>
                        </div>
                    </div>
                    <div class="activity-time">Yesterday</div>
                </li>

                <li class="activity-item">
                    <div class="activity-icon">
                        <i class="fas fa-chart-line"></i>
                    </div>
                    <div class="activity-content">
                        <div class="activity-text">Grammar score improved by 15%</div>
                        <div class="activity-details">
                            <span class="activity-detail">
                                <i class="fas fa-arrow-up"></i> Great progress this week
                            </span>
                        </div>
                    </div>
                    <div class="activity-time">2 days ago</div>
                </li>

                <li class="activity-item">
                    <div class="activity-icon">
                        <i class="fas fa-user-plus"></i>
                    </div>
                    <div class="activity-content">
                        <div class="activity-text">Connected with new partner from Japan</div>
                        <div class="activity-details">
                            <span class="activity-detail">
                                <i class="fas fa-globe-asia"></i> Cultural exchange
                            </span>
                        </div>
                    </div>
                    <div class="activity-time">3 days ago</div>
                </li>
            </ul>
        </section>
    </main>

    <script src="../js/dashboard.js"></script>
    <script>
        // Check authentication
        document.addEventListener('DOMContentLoaded', () => {
            const token = localStorage.getItem('token');
            const user = JSON.parse(localStorage.getItem('user') || '{}');
            
            if (!token || !user.email) {
                window.location.href = 'login.html';
                return;
            }

            // Update welcome message
            const welcomeMessage = document.getElementById('welcome-message');
            if (user.first_name) {
                welcomeMessage.textContent = `Welcome back, ${user.first_name}!`;
            }

            // Update user level
            const userLevel = document.getElementById('user-level');
            if (user.english_level) {
                const levelText = user.english_level.charAt(0).toUpperCase() + user.english_level.slice(1);
                userLevel.textContent = `${levelText} Level`;
            }

            // Initialize dashboard
            if (typeof initDashboard === 'function') {
                initDashboard();
            }
        });

        // Logout function
        function logout() {
            localStorage.removeItem('token');
            localStorage.removeItem('user');
            window.location.href = 'login.html';
        }

        // Add click handlers for action buttons
        document.querySelectorAll('.action-btn').forEach(btn => {
            btn.addEventListener('click', function(e) {
                // Add click animation
                this.style.transform = 'scale(0.95)';
                setTimeout(() => {
                    this.style.transform = '';
                }, 150);
            });
        });

        // Update stats with animations
        function updateStat(elementId, value, duration = 1000) {
            const element = document.getElementById(elementId);
            if (!element) return;
            
            const start = parseInt(element.textContent) || 0;
            const end = parseInt(value);
            const increment = (end - start) / (duration / 16); // 60fps
            
            let current = start;
            const timer = setInterval(() => {
                current += increment;
                if ((increment > 0 && current >= end) || (increment < 0 && current <= end)) {
                    current = end;
                    clearInterval(timer);
                }
                element.textContent = Math.round(current);
            }, 16);
        }

        // Animate stats on load
        window.addEventListener('load', () => {
            setTimeout(() => {
                updateStat('ai-score', 87);
                updateStat('total-calls', 42);
                updateStat('streak', 7);
                updateStat('active-days', 24);
            }, 500);
        });
    </script>
</body>
</html>